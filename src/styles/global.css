@import "tailwindcss";
@plugin "daisyui";

html, body, #root {
  height: 100%;
}

/* ============================================================================
   Edge Animation Keyframes - Global definitions to prevent re-injection
   ============================================================================ */
@keyframes pulseAnimation {
  0%, 100% { opacity: 0.5; stroke-width: 2; }
  50% { opacity: 1; stroke-width: 3.5; }
}

@keyframes dashAnimation {
  from { stroke-dashoffset: 12; }
  to { stroke-dashoffset: 0; }
}

@keyframes glowAnimation {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

@keyframes flowDotAnimation {
  0% { offset-distance: 0%; }
  100% { offset-distance: 100%; }
}

/* Edge animation classes - using classes prevents animation restart on re-render */
.edge-animation-pulse {
  animation: pulseAnimation 1.5s ease-in-out infinite;
}

.edge-animation-dash {
  stroke-dasharray: 8 4;
  animation: dashAnimation 0.5s linear infinite;
}

.edge-animation-glow {
  animation: glowAnimation 2s ease-in-out infinite;
}

.flow-dot {
  animation: flowDotAnimation 1.5s linear infinite;
}

.flow-dot-0 { animation-delay: 0s; }
.flow-dot-1 { animation-delay: 0.5s; }
.flow-dot-2 { animation-delay: 1s; }

/* Hide number input spinners */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  -moz-appearance: textfield;
  appearance: textfield;
}

/* Force crisp rendering for scaled elements */
.node-graph-container * {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Unified surface tokens - Material Design */
:root {
  --panel-radius: 4px;
  --panel-bg: #121212;
  --panel-bg-2: #1e1e1e;
  --panel-bg-3: #2d2d2d;
  --panel-border: rgba(255, 255, 255, 0.08);
  --panel-shadow: 0 8px 10px -5px rgba(0,0,0,.2), 0 16px 24px 2px rgba(0,0,0,.14), 0 6px 30px 5px rgba(0,0,0,.12);
  --panel-inner: inset 0 1px 0 rgba(255, 255, 255, 0.02);
  
  /* Default accent color - Material Blue 500 */
  --accent-color: #2196F3;
  --accent-color-hover: #42A5F5;
  --accent-color-dim: rgba(33, 150, 243, 0.5);
  --accent-color-bg: rgba(33, 150, 243, 0.2);
  
  /* Font size scale */
  --font-scale: 1;
}

/* Title bar icon uses accent color */
.title-icon {
  color: var(--accent-color);
}

/* Font size settings */
[data-font-size="small"] {
  --font-scale: 0.85;
}

[data-font-size="medium"] {
  --font-scale: 1;
}

[data-font-size="large"] {
  --font-scale: 1.15;
}

/* Apply font scaling to common text sizes */
[data-font-size] .text-xs {
  font-size: calc(0.75rem * var(--font-scale));
}

[data-font-size] .text-sm {
  font-size: calc(0.875rem * var(--font-scale));
}

[data-font-size] .text-base {
  font-size: calc(1rem * var(--font-scale));
}

[data-font-size] .text-lg {
  font-size: calc(1.125rem * var(--font-scale));
}

/* Apply font scaling to hardcoded pixel sizes used in nodes */
[data-font-size] .text-\[9px\] {
  font-size: calc(9px * var(--font-scale));
}

[data-font-size] .text-\[10px\] {
  font-size: calc(10px * var(--font-scale));
}

[data-font-size] .text-\[11px\] {
  font-size: calc(11px * var(--font-scale));
}

[data-font-size] .text-\[12px\] {
  font-size: calc(12px * var(--font-scale));
}

/* Apply font scaling to form elements in nodes */
[data-font-size] input,
[data-font-size] select,
[data-font-size] textarea,
[data-font-size] button {
  font-size: calc(1em * var(--font-scale));
}

/* Light theme overrides */
[data-theme="light"] {
  --panel-bg: #f8f9fa;
  --panel-bg-2: #ffffff;
  --panel-bg-3: #e9ecef;
  --panel-border: rgba(0, 0, 0, 0.12);
  --panel-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  --panel-inner: inset 0 1px 0 rgba(255, 255, 255, 0.8);
  
  /* Text colors for light theme */
  --text-primary: #1a1a2e;
  --text-secondary: #495057;
  --text-muted: #6c757d;
  --text-dim: #adb5bd;
  
  /* Surface colors */
  --surface-elevated: #ffffff;
  --surface-base: #f8f9fa;
  --surface-sunken: #e9ecef;
  --surface-hover: #dee2e6;
  
  /* Canvas/graph specific */
  --canvas-bg: #e9ecef;
  --canvas-grid: rgba(0, 0, 0, 0.06);
  --node-bg: #ffffff;
  --node-header: #f1f3f4;
  --node-border: rgba(0, 0, 0, 0.1);
  --node-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Light theme component overrides */
[data-theme="light"] .bg-animated {
  background-image:
    radial-gradient(1200px 800px at 10% 10%, rgba(139, 92, 246, 0.08), transparent 60%),
    radial-gradient(1000px 700px at 90% 20%, rgba(147, 51, 234, 0.06), transparent 60%),
    radial-gradient(900px 700px at 50% 100%, rgba(124, 58, 237, 0.05), transparent 60%),
    linear-gradient(120deg, #f0f0f5 0%, #e8e8f0 35%, #f5f5fa 100%);
}

/* Light theme text colors */
[data-theme="light"] {
  color-scheme: light;
}

[data-theme="light"] .text-white {
  color: #1a1a2e !important;
}

[data-theme="light"] .text-gray-200 {
  color: #374151 !important;
}

[data-theme="light"] .text-gray-300 {
  color: #4b5563 !important;
}

[data-theme="light"] .text-gray-400 {
  color: #6b7280 !important;
}

[data-theme="light"] .text-gray-500 {
  color: #9ca3af !important;
}

[data-theme="light"] .text-gray-600 {
  color: #d1d5db !important;
}

/* Light theme backgrounds - Material Design */
[data-theme="light"] .bg-\[\#121212\] {
  background-color: #fafafa !important;
}

[data-theme="light"] .bg-\[\#1e1e1e\] {
  background-color: #ffffff !important;
}

[data-theme="light"] .bg-\[\#212121\] {
  background-color: #f5f5f5 !important;
}

[data-theme="light"] .bg-\[\#2d2d2d\] {
  background-color: #eeeeee !important;
}

[data-theme="light"] .hover\:bg-\[\#2d2d2d\]:hover {
  background-color: #e0e0e0 !important;
}

/* Light theme gradients */
[data-theme="light"] .from-\[\#0a0d10\],
[data-theme="light"] .from-\[\#0f1419\] {
  --tw-gradient-from: #f8f9fa !important;
}

[data-theme="light"] .from-\[\#151a21\],
[data-theme="light"] .from-\[\#161b22\] {
  --tw-gradient-from: #ffffff !important;
}

[data-theme="light"] .from-\[\#1a1f26\],
[data-theme="light"] .from-\[\#1c222b\] {
  --tw-gradient-from: #e9ecef !important;
}

[data-theme="light"] .to-\[\#0f1419\],
[data-theme="light"] .to-\[\#0a0d10\] {
  --tw-gradient-to: #f8f9fa !important;
}

[data-theme="light"] .to-\[\#1a1f28\],
[data-theme="light"] .to-\[\#1c222b\],
[data-theme="light"] .to-\[\#1e242c\] {
  --tw-gradient-to: #e9ecef !important;
}

/* Light theme borders */
[data-theme="light"] .border-white\/5,
[data-theme="light"] .border-white\/10 {
  border-color: rgba(0, 0, 0, 0.08) !important;
}

[data-theme="light"] .border-white\/20 {
  border-color: rgba(0, 0, 0, 0.12) !important;
}

/* Light theme bg opacity variants */
[data-theme="light"] .bg-white\/5 {
  background-color: rgba(0, 0, 0, 0.03) !important;
}

[data-theme="light"] .bg-white\/10 {
  background-color: rgba(0, 0, 0, 0.06) !important;
}

[data-theme="light"] .bg-white\/20 {
  background-color: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .bg-black\/20,
[data-theme="light"] .bg-black\/30,
[data-theme="light"] .bg-black\/40 {
  background-color: rgba(0, 0, 0, 0.04) !important;
}

[data-theme="light"] .bg-black\/50,
[data-theme="light"] .bg-black\/60 {
  background-color: rgba(0, 0, 0, 0.5) !important;
}

/* Light theme hover states */
[data-theme="light"] .hover\:bg-white\/5:hover {
  background-color: rgba(0, 0, 0, 0.04) !important;
}

[data-theme="light"] .hover\:bg-white\/10:hover {
  background-color: rgba(0, 0, 0, 0.08) !important;
}

/* Light theme scrollbars */
[data-theme="light"] ::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.05);
}

[data-theme="light"] ::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
}

[data-theme="light"] ::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.25);
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.03);
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.2);
}

/* Light theme glass effect */
[data-theme="light"] .glass {
  background: linear-gradient(180deg, #ffffff 0%, #f8f9fa 100%);
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04);
}

/* Light theme node inputs */
[data-theme="light"] .node-root select {
  color-scheme: light;
  background-color: #f8f9fa;
  color: #1a1a2e;
}

[data-theme="light"] .node-root select option {
  background-color: #ffffff;
  color: #1a1a2e;
}

[data-theme="light"] .node-root select option:checked {
  background-color: #e9ecef;
  color: #1a1a2e;
}

/* Light theme node body */
[data-theme="light"] .node-root {
  background-color: #ffffff !important;
  border-color: rgba(0, 0, 0, 0.12) !important;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.04) !important;
}

[data-theme="light"] .node-root .text-gray-200,
[data-theme="light"] .node-root .text-gray-300 {
  color: #374151 !important;
}

[data-theme="light"] .node-root .text-gray-400 {
  color: #6b7280 !important;
}

[data-theme="light"] .node-root .text-gray-500 {
  color: #9ca3af !important;
}

[data-theme="light"] .node-root input[type="text"],
[data-theme="light"] .node-root input[type="number"] {
  background-color: #f1f3f4 !important;
  color: #1a1a2e !important;
}

[data-theme="light"] .bg-\[\#1a1f28\],
[data-theme="light"] .bg-\[\#2a2e38\] {
  background-color: #ffffff !important;
}

/* Light theme node data area */
[data-theme="light"] .node-root .bg-black\/30 {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

[data-theme="light"] .node-root .border-white\/5 {
  border-color: rgba(0, 0, 0, 0.08) !important;
}

/* Light theme context menus and modals */
[data-theme="light"] .fixed.z-\[1100\] {
  background-color: #ffffff !important;
  border-color: rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .fixed.z-\[1100\] .text-white {
  color: #1a1a2e !important;
}

[data-theme="light"] .fixed.z-\[1100\] button:hover {
  background-color: rgba(0, 0, 0, 0.05) !important;
}

/* Light theme for high z-index modals (code editor, etc) */
[data-theme="light"] .fixed.z-\[2000\] .bg-\[\#1a1f28\],
[data-theme="light"] .fixed.z-\[1000\] .bg-\[\#1a1f28\] {
  background-color: #ffffff !important;
}

[data-theme="light"] .fixed.z-\[2000\] .text-white,
[data-theme="light"] .fixed.z-\[1000\] .text-white {
  color: #1a1a2e !important;
}

[data-theme="light"] .fixed.z-\[2000\] textarea,
[data-theme="light"] .fixed.z-\[2000\] input {
  background-color: #f1f3f4 !important;
  color: #1a1a2e !important;
  border-color: rgba(0, 0, 0, 0.15) !important;
}

[data-theme="light"] .fixed.z-\[2000\] .text-gray-400 {
  color: #6b7280 !important;
}

[data-theme="light"] .fixed.z-\[2000\] .text-gray-200 {
  color: #374151 !important;
}

/* Light theme comment nodes */
[data-theme="light"] .node-root[style*="background-color: rgba(59, 130, 246"] {
  border: 1px solid rgba(59, 130, 246, 0.4) !important;
}

/* Light theme for modals overlay backgrounds (keep dark for contrast) */
[data-theme="light"] .bg-black\/70 {
  background-color: rgba(0, 0, 0, 0.5) !important;
}

/* Light theme gray backgrounds for disabled states */
[data-theme="light"] .bg-gray-700 {
  background-color: #e9ecef !important;
}

[data-theme="light"] .bg-gray-800 {
  background-color: #dee2e6 !important;
}

[data-theme="light"] .text-gray-500 {
  color: #9ca3af !important;
}

/* Light theme header/title bar */
[data-theme="light"] .drag-region {
  background-color: #f8f9fa !important;
  border-color: rgba(0, 0, 0, 0.1) !important;
}

[data-theme="light"] .drag-region .text-gray-400 {
  color: #6b7280 !important;
}

[data-theme="light"] .drag-region button:hover {
  background-color: rgba(0, 0, 0, 0.08) !important;
}

[data-theme="light"] .drag-region .hover\:text-white:hover {
  color: #1a1a2e !important;
}

/* Light theme modal-specific overrides (for Settings, dialogs, etc) */
[data-theme="light"] .rounded-xl.shadow-2xl {
  background-color: #ffffff !important;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

[data-theme="light"] .rounded-xl.shadow-2xl .text-white {
  color: #1a1a2e !important;
}

[data-theme="light"] .rounded-xl.shadow-2xl .text-gray-400 {
  color: #6b7280 !important;
}

[data-theme="light"] .rounded-xl.shadow-2xl .text-gray-500 {
  color: #9ca3af !important;
}

[data-theme="light"] .rounded-xl.shadow-2xl .border-white\/10 {
  border-color: rgba(0, 0, 0, 0.08) !important;
}

[data-theme="light"] .rounded-xl.shadow-2xl .hover\:bg-white\/10:hover {
  background-color: rgba(0, 0, 0, 0.06) !important;
}

[data-theme="light"] .rounded-xl.shadow-2xl .hover\:text-white:hover {
  color: #1a1a2e !important;
}

/* Light theme Welcome Screen */
[data-theme="light"] .bg-gradient-to-br.from-\[\#0f1419\].via-\[\#151a21\].to-\[\#1a1f26\] {
  background: linear-gradient(to bottom right, #f8f9fa, #ffffff, #f1f3f4) !important;
}

[data-theme="light"] .via-\[\#151a21\] {
  --tw-gradient-via: #ffffff !important;
  --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-via), var(--tw-gradient-to) !important;
}

/* Light theme Welcome Screen buttons */
[data-theme="light"] .from-purple-500\/10,
[data-theme="light"] .from-blue-500\/10 {
  --tw-gradient-from: rgba(99, 102, 241, 0.08) !important;
}

[data-theme="light"] .to-purple-600\/10,
[data-theme="light"] .to-blue-600\/10 {
  --tw-gradient-to: rgba(99, 102, 241, 0.05) !important;
}

[data-theme="light"] .hover\:from-purple-500\/20:hover,
[data-theme="light"] .hover\:from-blue-500\/20:hover {
  --tw-gradient-from: rgba(99, 102, 241, 0.15) !important;
}

[data-theme="light"] .hover\:to-purple-600\/20:hover,
[data-theme="light"] .hover\:to-blue-600\/20:hover {
  --tw-gradient-to: rgba(99, 102, 241, 0.1) !important;
}

/* Light theme Welcome Screen recent projects section */
[data-theme="light"] .bg-\[\#1a1f26\]\/50 {
  background-color: rgba(0, 0, 0, 0.03) !important;
}

/* Light theme purple icon backgrounds */
[data-theme="light"] .bg-purple-500\/20 {
  background-color: var(--accent-color-bg, rgba(139, 92, 246, 0.15)) !important;
}

[data-theme="light"] .group-hover\:bg-purple-500\/30:hover,
[data-theme="light"] .group:hover .group-hover\:bg-purple-500\/30 {
  background-color: var(--accent-color-bg, rgba(139, 92, 246, 0.25)) !important;
}

[data-theme="light"] .bg-blue-500\/20 {
  background-color: rgba(59, 130, 246, 0.15) !important;
}

[data-theme="light"] .group-hover\:bg-blue-500\/30:hover,
[data-theme="light"] .group:hover .group-hover\:bg-blue-500\/30 {
  background-color: rgba(59, 130, 246, 0.25) !important;
}

/* Light theme kbd/keyboard hints */
[data-theme="light"] kbd.bg-white\/10 {
  background-color: rgba(0, 0, 0, 0.08) !important;
  color: #374151 !important;
}

/* Light theme recent project hover border */
[data-theme="light"] .hover\:border-purple-500\/30:hover {
  border-color: var(--accent-color-dim, rgba(139, 92, 246, 0.3)) !important;
}

/* Accent color utility classes */
.accent-bg { background-color: var(--accent-color) !important; }
.accent-bg-hover:hover { background-color: var(--accent-color-hover) !important; }
.accent-bg-dim { background-color: var(--accent-color-bg) !important; }
.accent-text { color: var(--accent-color) !important; }
.accent-text-hover:hover { color: var(--accent-color-hover) !important; }
.accent-border { border-color: var(--accent-color) !important; }
.accent-ring { --tw-ring-color: var(--accent-color) !important; }
.accent-shadow { box-shadow: 0 0 0 2px var(--accent-color-dim) !important; }

/* Custom window chrome */
.drag-region {
  -webkit-app-region: drag;
}
.no-drag {
  -webkit-app-region: no-drag;
}

/* Modern background - Material Design */
.bg-animated {
  background-image:
    radial-gradient(1200px 800px at 10% 10%, rgba(33, 150, 243, 0.08), transparent 60%),
    radial-gradient(1000px 700px at 90% 20%, rgba(33, 150, 243, 0.06), transparent 60%),
    radial-gradient(900px 700px at 50% 100%, rgba(33, 150, 243, 0.04), transparent 60%),
    linear-gradient(120deg, #121212 0%, #1a1a1a 35%, #121212 100%);
  background-size: 200% 200%, 200% 200%, 200% 200%, 100% 100%;
  animation: moveGradient 40s ease-in-out infinite;
}

@keyframes moveGradient {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* Glass panels */
.glass {
  background: linear-gradient(180deg, var(--panel-bg-2) 0%, var(--panel-bg) 100%);
  border: 1px solid var(--panel-border);
  border-radius: var(--panel-radius);
  background-clip: padding-box;
  box-shadow: 0 14px 28px rgba(0,0,0,0.35), 0 4px 10px rgba(0,0,0,0.25), var(--panel-inner);
}

/* Scrollbars */
::-webkit-scrollbar { width: 10px; height: 10px; }
::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.2); border-radius: 5px; }
::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.15); border-radius: 5px; }
::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.25); }

/* Custom scrollbar for tree views */
.custom-scrollbar::-webkit-scrollbar { width: 8px; }
.custom-scrollbar::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1); }
.custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.1); border-radius: 4px; }
.custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255, 255, 255, 0.2); }

/* Dark themed select dropdowns - node inline editors */
.node-root select {
  color-scheme: dark;
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.5rem center;
  background-repeat: no-repeat;
  background-size: 1em 1em;
  padding-right: 2rem;
}

.node-root select:focus {
  border: none !important;
  outline: none !important;
  box-shadow: inset 0 0 0 1px rgba(168, 85, 247, 0.5) !important;
}

.node-root select option {
  background-color: #1a1f28;
  color: #e5e7eb;
  padding: 8px 12px;
}

.node-root select option:checked {
  background-color: #2d3748;
  color: #fff;
}

/* Also style inputs inside nodes */
.node-root input[type="text"],
.node-root input[type="number"] {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

.node-root input[type="text"]:focus,
.node-root input[type="number"]:focus {
  border: none !important;
  outline: none !important;
  box-shadow: inset 0 0 0 1px rgba(168, 85, 247, 0.5) !important;
}

/* GPU acceleration hints for node graph canvas (improves Windows performance) */
.node-root {
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Notification slide-in animation */
@keyframes slide-in {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.animate-slide-in {
  animation: slide-in 0.3s ease-out forwards;
}

/* Modal scale-in animation */
@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-scale-in {
  animation: scale-in 0.15s ease-out forwards;
}

/* ReactFlow selection rectangle - hide persistent selection box */
.react-flow__nodesselection-rect,
.react-flow__selection-rect,
.react-flow__selectionbox {
  opacity: 0 !important;
  pointer-events: none !important;
  visibility: hidden !important;
}

/* Hide selection rect in viewport */
.react-flow__viewport .react-flow__selection-rect,
.react-flow__viewport .react-flow__nodesselection-rect {
  opacity: 0 !important;
  pointer-events: none !important;
  visibility: hidden !important;
}

/* Hide selection pane after selection */
.react-flow__selectionpane {
  opacity: 0 !important;
  pointer-events: none !important;
  visibility: hidden !important;
}
